{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"ngx-toastr\";\nimport * as i2 from \"../background-message.service\";\nimport * as i3 from \"../identity.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../modals/change-did-modal/change-did-modal.component\";\nimport * as i6 from \"../modals/test-data-modal/test-data-modal.component\";\nimport * as i7 from \"../modals/create-did-modal/create-did-modal.component\";\nimport * as i8 from \"../modals/new-key-modal/new-key-modal.component\";\nimport * as i9 from \"../modals/remove-key-modal/remove-key-modal.component\";\nimport * as i10 from \"../modals/change-password-modal/change-password-modal.component\";\nconst _c0 = [\"newKeyButton\"];\nconst _c1 = [\"removeKeyModal\"];\nconst _c2 = [\"changeDIDModal\"];\nconst _c3 = [\"testDataModal\"];\nconst _c4 = [\"createDIDModal\"];\nconst _c5 = [\"newKeyModal\"];\nconst _c6 = [\"changePasswordModal\"];\n\nfunction SettingsComponent_div_43_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 32)(1, \"div\", 33)(2, \"h5\", 34)(3, \"a\", 35);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(5, \"div\", 36)(6, \"div\", 37)(7, \"div\", 38);\n    i0.ɵɵelement(8, \"textarea\", 39);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 40);\n    i0.ɵɵlistener(\"click\", function SettingsComponent_div_43_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const key_r8 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.openRemoveKeyModal(key_r8.kid));\n    });\n    i0.ɵɵelementStart(10, \"small\");\n    i0.ɵɵtext(11, \"Remove\");\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const key_r8 = ctx.$implicit;\n    const i_r9 = ctx.index;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"id\", \"key\" + i_r9);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"href\", \"#keyCollapse\" + i_r9, i0.ɵɵsanitizeUrl);\n    i0.ɵɵattribute(\"aria-controls\", \"keyCollapse\" + i_r9);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Key - \", i_r9, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"id\", \"keyCollapse\" + i_r9);\n    i0.ɵɵattribute(\"aria-labelledby\", \"key\" + i_r9);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"value\", key_r8.kid);\n  }\n}\n\nexport let SettingsComponent = /*#__PURE__*/(() => {\n  class SettingsComponent {\n    constructor(changeDetector, toastrService, messageService, identityService) {\n      this.changeDetector = changeDetector;\n      this.toastrService = toastrService;\n      this.messageService = messageService;\n      this.identityService = identityService;\n      this.signingInfoSet = [];\n      this.clickedBack = new EventEmitter();\n      this.messageService.sendMessage({\n        task: 10\n        /* TASKS.GET_IDENTITY */\n\n      }, response => {\n        if (response.did) {\n          this.currentDID = response.did;\n          this.signingInfoSet = JSON.parse(response.keys);\n          this.identityService.setCurrentDID(this.currentDID);\n          this.identityService.setSigningInfoSet(this.signingInfoSet);\n        } else {\n          this.currentDID = 'No DID provided';\n          this.newKeyButton.nativeElement.disabled = true;\n        }\n\n        this.changeDetector.detectChanges();\n      });\n    }\n\n    ngOnInit() {}\n\n    didChange(changed) {\n      if (changed) {\n        this.newKeyButton.nativeElement.disabled = false;\n        this.currentDID = this.identityService.getCurrentDID();\n        this.signingInfoSet = this.identityService.getSigningInfoSet();\n        this.changeDetector.detectChanges();\n      }\n    }\n\n    openChangeDIDModal() {\n      this.changeDIDModal.open();\n    }\n\n    openTestDataModal() {\n      this.testDataModal.open();\n    }\n\n    openCreateDIDModal() {\n      this.createDIDModal.open();\n    }\n\n    openNewKeyModal() {\n      this.newKeyModal.open();\n    }\n\n    openRemoveKeyModal(kid) {\n      this.removeKeyModal.open(kid);\n    }\n\n    openChangePasswordModal() {\n      this.changePasswordModal.open();\n    }\n\n    goBack() {\n      this.clickedBack.emit(true);\n    }\n\n  }\n\n  SettingsComponent.ɵfac = function SettingsComponent_Factory(t) {\n    return new (t || SettingsComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.ToastrService), i0.ɵɵdirectiveInject(i2.BackgroundMessageService), i0.ɵɵdirectiveInject(i3.IdentityService));\n  };\n\n  SettingsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SettingsComponent,\n    selectors: [[\"app-settings\"]],\n    viewQuery: function SettingsComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n        i0.ɵɵviewQuery(_c2, 5);\n        i0.ɵɵviewQuery(_c3, 5);\n        i0.ɵɵviewQuery(_c4, 5);\n        i0.ɵɵviewQuery(_c5, 5);\n        i0.ɵɵviewQuery(_c6, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.newKeyButton = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.removeKeyModal = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.changeDIDModal = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.testDataModal = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.createDIDModal = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.newKeyModal = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.changePasswordModal = _t.first);\n      }\n    },\n    outputs: {\n      clickedBack: \"clickedBack\"\n    },\n    decls: 63,\n    vars: 2,\n    consts: [[1, \"settings\"], [1, \"setting\"], [1, \"container-fluid\", \"identity\"], [1, \"identity-inner\"], [1, \"row\", \"identity-top\"], [1, \"col\"], [1, \"col\", \"d-flex\", \"justify-content-end\", \"identity-actions\"], [1, \"btn\", \"btn-link\", 3, \"click\"], [1, \"row\", \"identity-bottom\"], [1, \"col\", \"current-did\"], [1, \"text-muted\"], [3, \"didChanged\"], [\"changeDIDModal\", \"\"], [\"testDataModal\", \"\"], [\"createDIDModal\", \"\"], [1, \"container-fluid\", \"signing-keys\"], [1, \"signing-keys-inner\"], [1, \"row\", \"signing-keys-top\"], [1, \"col\", \"d-flex\", \"justify-content-end\", \"new-key-btn\"], [\"type\", \"button\", 1, \"btn\", \"btn-link\", 3, \"click\"], [\"newKeyButton\", \"\"], [1, \"row\", \"signing-keys-bottom\"], [\"id\", \"keyAccordion\", \"role\", \"tablist\"], [\"class\", \"card\", 4, \"ngFor\", \"ngForOf\"], [\"newKeyModal\", \"\"], [\"removeKeyModal\", \"\"], [1, \"password\"], [1, \"password-inner\"], [1, \"row\", \"password-top\"], [1, \"col\", \"d-flex\", \"justify-content-end\", \"new-password-btn\"], [\"changePasswordModal\", \"\"], [1, \"btn\", \"btn-link\", \"btn-back\", 3, \"click\"], [1, \"card\"], [\"role\", \"tab\", 1, \"card-header\", 3, \"id\"], [1, \"mb-0\"], [\"data-toggle\", \"collapse\", \"aria-expanded\", \"true\", 3, \"href\"], [\"role\", \"tabpanel\", 1, \"collapse\", 3, \"id\"], [1, \"card-body\"], [1, \"input-group\", \"input-group-sm\"], [\"aria-label\", \"Small\", \"aria-describedby\", \"inputGroup-sizing-sm\", \"disabled\", \"\", 1, \"form-control\", 3, \"value\"], [1, \"btn\", \"btn-link\", \"remove-key-btn\", 3, \"click\"]],\n    template: function SettingsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"p\");\n        i0.ɵɵtext(7, \"Current Identity\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 6)(9, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function SettingsComponent_Template_button_click_9_listener() {\n          return ctx.openTestDataModal();\n        });\n        i0.ɵɵelementStart(10, \"small\");\n        i0.ɵɵtext(11, \"Test\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function SettingsComponent_Template_button_click_12_listener() {\n          return ctx.openCreateDIDModal();\n        });\n        i0.ɵɵelementStart(13, \"small\");\n        i0.ɵɵtext(14, \"Create\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function SettingsComponent_Template_button_click_15_listener() {\n          return ctx.openChangeDIDModal();\n        });\n        i0.ɵɵelementStart(16, \"small\");\n        i0.ɵɵtext(17, \"Change\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(18, \"div\", 8)(19, \"div\", 9)(20, \"p\")(21, \"span\", 10);\n        i0.ɵɵtext(22);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(23, \"change-did-modal\", 11, 12);\n        i0.ɵɵlistener(\"didChanged\", function SettingsComponent_Template_change_did_modal_didChanged_23_listener($event) {\n          return ctx.didChange($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"test-data-modal\", 11, 13);\n        i0.ɵɵlistener(\"didChanged\", function SettingsComponent_Template_test_data_modal_didChanged_25_listener($event) {\n          return ctx.didChange($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"create-did-modal\", 11, 14);\n        i0.ɵɵlistener(\"didChanged\", function SettingsComponent_Template_create_did_modal_didChanged_27_listener($event) {\n          return ctx.didChange($event);\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(29, \"div\", 15)(30, \"div\", 16)(31, \"div\", 17)(32, \"div\", 5)(33, \"p\");\n        i0.ɵɵtext(34, \"Signing Keys\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(35, \"div\", 18)(36, \"button\", 19, 20);\n        i0.ɵɵlistener(\"click\", function SettingsComponent_Template_button_click_36_listener() {\n          return ctx.openNewKeyModal();\n        });\n        i0.ɵɵelementStart(38, \"small\");\n        i0.ɵɵtext(39, \"Add New Key\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(40, \"div\", 21)(41, \"div\", 5)(42, \"div\", 22);\n        i0.ɵɵtemplate(43, SettingsComponent_div_43_Template, 12, 7, \"div\", 23);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(44, \"new-key-modal\", 11, 24);\n        i0.ɵɵlistener(\"didChanged\", function SettingsComponent_Template_new_key_modal_didChanged_44_listener($event) {\n          return ctx.didChange($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"remove-key-modal\", 11, 25);\n        i0.ɵɵlistener(\"didChanged\", function SettingsComponent_Template_remove_key_modal_didChanged_46_listener($event) {\n          return ctx.didChange($event);\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(48, \"div\", 1)(49, \"div\", 26)(50, \"div\", 27)(51, \"div\", 28)(52, \"div\", 5)(53, \"p\");\n        i0.ɵɵtext(54, \"Password\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(55, \"div\", 29)(56, \"button\", 19);\n        i0.ɵɵlistener(\"click\", function SettingsComponent_Template_button_click_56_listener() {\n          return ctx.openChangePasswordModal();\n        });\n        i0.ɵɵelementStart(57, \"small\");\n        i0.ɵɵtext(58, \"Change\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(59, \"change-password-modal\", 11, 30);\n        i0.ɵɵlistener(\"didChanged\", function SettingsComponent_Template_change_password_modal_didChanged_59_listener($event) {\n          return ctx.didChange($event);\n        });\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(61, \"button\", 31);\n        i0.ɵɵlistener(\"click\", function SettingsComponent_Template_button_click_61_listener() {\n          return ctx.goBack();\n        });\n        i0.ɵɵtext(62, \"Go Back\");\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(22);\n        i0.ɵɵtextInterpolate(ctx.currentDID);\n        i0.ɵɵadvance(21);\n        i0.ɵɵproperty(\"ngForOf\", ctx.signingInfoSet);\n      }\n    },\n    dependencies: [i4.NgForOf, i5.ChangeDIDModalComponent, i6.TestDataModalComponent, i7.CreateDIDModalComponent, i8.NewKeyModalComponent, i9.RemoveKeyModalComponent, i10.ChangePasswordModalComponent],\n    styles: [\".settings[_ngcontent-%COMP%]{max-height:400px;overflow-y:scroll}.identity[_ngcontent-%COMP%]{padding-left:25px;padding-right:25px;font-size:17px;margin-bottom:30px}.identity-inner[_ngcontent-%COMP%]{background-color:#f0f0f0;padding:20px 25px 2px}.identity-top[_ngcontent-%COMP%]{height:38px}.identity-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#24c1b6;padding-top:0;padding-right:0;font-size:18px;margin-top:-12px}.current-did[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{word-break:break-all}.signing-keys[_ngcontent-%COMP%]{padding-left:25px;padding-right:25px;font-size:17px;margin-bottom:28px}.signing-keys-inner[_ngcontent-%COMP%]{background-color:#f0f0f0;padding-bottom:2px}.signing-keys-top[_ngcontent-%COMP%]{height:65px;margin-left:0;margin-right:0;padding-top:20px;padding-left:10px;padding-right:10px;border-bottom:1px solid #d6d4d4}.new-key-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#24c1b6;padding-top:0;padding-right:0;font-size:18px;margin-top:-12px}.signing-keys-bottom[_ngcontent-%COMP%]{margin-left:0;margin-right:0;padding-left:0;padding-right:0}.signing-keys-bottom[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{padding-left:0;padding-right:0}#keyAccordion[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding-top:18px}#keyAccordion[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{padding-left:4px;padding-right:4px}#keyAccordion[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:17px;color:#24c1b6!important}.remove-key-btn[_ngcontent-%COMP%]{color:#24c1b6!important}.password[_ngcontent-%COMP%]{padding-left:25px;padding-right:25px;font-size:17px;margin-bottom:28px}.password-inner[_ngcontent-%COMP%]{background-color:#f0f0f0;padding-bottom:2px}.password-top[_ngcontent-%COMP%]{height:65px;margin-left:0;margin-right:0;padding-top:20px;padding-left:10px;padding-right:10px;border-bottom:1px solid #d6d4d4}.new-password-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#24c1b6;padding-top:0;padding-right:0;font-size:18px;margin-top:-12px}.btn-link[_ngcontent-%COMP%]:active:focus{background-color:transparent}.btn-link[_ngcontent-%COMP%]:focus{outline:none!important;box-shadow:none}.btn-back[_ngcontent-%COMP%]{color:#24c1b6;font-size:18px;margin-left:25px}\"]\n  });\n  return SettingsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}